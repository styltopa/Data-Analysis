Πολλές από τις σημειώσεις αυτές είναι από την εκπόνηση των εργασιών σε matlab το έτος 2022-2023.

...Κεφάλαιο 2...

2.1
- Για να πάρεις βοήθεια σε κάποια συνάρτηση που δεν ξέρεις μπορείς να γράψεις στο command line (γραμμή εντολών):
help όνομα_εντολής

- Για να βρεις documentation όπως αυτό εμφανίζεται online μπορείς να γράψεις στη γραμμή εντολών:
doc όνομα_εντολής

- Για να βάλεις πολλές σειρές σχόλιων: 
Επιλέγεις το χωρίο που θέλεις να σχολιαστεί (μπαίνει μπροστά το %) και πατάς: Ctrl + R
- Για να βγάλεις τα σχόλια:
Επιλέγεις το χωρίο που θέλεις να σχολιαστεί και πατάς: Ctrl + T

- Συντόμευση πληκτρολογίου για να τρέξεις πρόγραμμα (αντί του να πατήσεις το RUN):
F5

- Για να εμφανίσεις ένα διάνυσμα ή έναν πίνακα ή ένα string (συμβολοσειρά):
disp(myVector); 

- Για να βρεις τον τύπο μίας μεταβλητής που έχεις:
class(myVariable) - επιστρέφει τον τύπο της μεταβλητής myVariable.

-  Για να φτιάξεις ένα διάνυσμα 20 τυχαίων ακέραιων αριθμών από κανονική κατανομή μεταξύ 0 και 10:
disp(randi([0, 10], 20, 0);

- Η rand επιστρέφει τιμές από 0 ως 1.

- Όσον αφορά στα indexes διανυσμάτων/πινάκων:
% πχ για αναφορά στο τρίτο στοιχείο του vector
Σωστό: myVector(2)
Λάθος: myVector[2]

Για περισσότερες πληροφορίες όσον αφορά στο matrix indexing:
https://www.mathworks.com/company/newsletters/articles/matrix-indexing-in-matlab.html

- Τα indexes των πινάκων στη matlab ξεκινούν από το 1 και όχι από το 0.
Εμφανίζεται το Error: Array indices must be positive integers or logical values.

- To for i = 1:10 σημαίνει ότι θα γίνουν 10 επαναλήψεις, με την πρώτη για τιμή του i 1 και την τελευταία για τιμή του i 10.
Είναι δηλαδή σαν 
for(int i = 1; i < 10 + 1; i++){ #προσοχή στο ότι αρχίζουμε το μέτρημα από το 1 και τελειώνουμε στο 10 αφότου έχει γίνει η επανάληψη και για το 10)
	...
}
της C.


- Προσοχή στο πού τοποθετείς τις δηλώσεις των συναρτήσεών σου. Αυτές πρέπει να τοποθετούνται μετά τον κυρίως κώδικα δηλαδή στο τέλος του αρχείου.

(- Για να κλείσει ΌΛΟ το MATLAB μπορείς να γράψεις:
quit 
ή exit στο πρόγραμμα)

- Για να κλείσει μόνο το πρόγραμμα γράφεις:
Ctrl + C

ή ως εντολή στο πρόγραμμά σου:
return


- Σωστή διαστασιολόγηση πινάκων
ones(length(nmin:nmax),1)
επιστρέφει ένα διάνυσμα μήκους length(nmin:nmax), 1
ενώ το nmin:nmax 
επιστρέφει ένα διάνυσμα μήκους 1, length(nmin:nmax)

- xlim([0.2 0.3]) ορίζει τα όρια στον οριζόντιο άξονα του plot που προηγήθηκε ως εντολή.
ylim([34 90]) ορίζει τα όρια στον κατακόρυφο άξονα του plot που προηγήθηκε ως εντολή.

2.2

- Εμφάνιση δύο διανυσμάτων ίδιου μήκους ως στήλες:

x = rand(n, 1);
y = -(1/lamda)*log(x);
disp([x, y]);

έτσι φαίνεται η τιμή του x και δίπλα η μετασχηματισμένη τιμή του δηλαδή η τιμή του y.

- Πολλά plots στο ίδιο παράθυρο:
Γράφεις hold on μεταξύ των plots.
Αφού βάλεις και το τελευταίο plot, μπορείς να γράψεις hold off για να μη συνεχίζουν τα plots να γίνονται printed στο ίδιο ένα plot (αλλά -ενδεχομένως- να πάνε σε κάποιο επόμενο.
https://www.mathworks.com/help/matlab/creating_plots/combine-multiple-plots.html

- Για παραγωγή των ίδιων τυχαίων αριθμών κάθε φορά:
rng(ένας συγκεκριμένος αριθμός που θες πχ. 1)
πχ rng(1);

- Προσοχή στη διαφορά στα ιστογράμματα:
Έστω ότι έχουμε μία τυχαία μεταβλητή Υ και το δείγμα της y.
Οι εντολές:
1) histogram(y)
ή 
histogram(y, 'Normalization', 'count')  (που είναι το ίδιο, δηλαδή είναι η default τιμή).
φτιάχνουν το ιστόγραμμα με τις απόλυτες συχόντητες εμφάνισης τιμών εντός των διάφορων bins. Έτσι, παράγονται οσοδήποτε μεγάλα σε ύψος bins.

2) Το histogram(y, 'Normalization', 'probability')
και δίνει το ιστόγραμμα με τις σχετικές συχνότητες εμφάνισης των συγκεκριμένων τιμών των παρατηρήσεων δηλαδή τις απόλυτες συχνότητες εμφάνισης των παρατηρήσεων δια το πλήθος όλων των παρατηρήσεων.
Το άθροισμα όλων αυτών των τιμών είναι η μονάδα.

3) H κανονικοποίηση histogram(y, Normalization, 'pdf') παίρνει το ιστόγραμμα και από αυτό βγάζει την συνάρτηση πυκνότητας πιθανότητας.
Αυτό το κάνει ως εξής:
παίρνει τις σχετικές συχνότητες κάθε bin δηλαδή τις απόλυτες συχνότητες εμφάνισης των τιμών διαιρεμένες δια το πλήθος τους.
Στη συνέχεια, τις διαιρεί με το πλάτος (δηλαδή το μήκος της βάσης) του bin.
Αν ενώσουμε αυτές τις τιμές με μία γραμμή, προκύπτει η συνάρτηση πυκνότητας πιθανότητας. Αν πυκνώσουν τα bins και αυξηθούν σε πλήθος, το άθροισμα των επιφανειών των bins (και όχι μόνο των υψών δηλαδή των σχετικών συχνοτήτων αλλά ύψος επί πλάτος κάθε bin) ισούται με 1.
Όπως είναι προφανές, το άθροισμα αυτών των εμβαδών δίνει 1. Αν πυκνώσουν τα bins, το άθροισμα των εμβαδών γίνεται ολοκλήρωμα κάτω από την καμπύλη που ορίζεται από τις τιμές που υπολογίστηκαν προηγουμένως.



2.3
- Ορισμός πολυδιάστατων πινάκων γνωστών τιμών:
myMatrix = [1 1.5; 23 4];
είναι ο 2d πίνακας με τις αντίστοιχες τιμές. Κάθε γραμμή χωρίζεται από την επόμενη με ελληνικό ερωτηματικό (;).

- Για να εκτυπώσεις κα΄τι στην οθόνη: μπορείς να χρησιμοποιήσεις (πέρα από την disp) την fprintf (και όχι την printf - δεν αναγνωρίζεται ως συνάρτηση από το matlab) για να εμφανίσεις ένα μήνυμα στην οθόνη.

- Συνέχιση fprintf στην επόμενη γραμμή:

fprintf(['Long text', ...
    'continuing on the next line', ...
    'and so on']);

δηλαδή εμφανίζεις ουσιαστικά strings από διαφορετικές σειρές θεωρώντας τα στοιχεία ενός πίνακα χωρίζεις τα διαφορετικά πράγματα που γράφεις με κόμμα και αποσιωπητικά.

Προσοχή! 
Εντός της fprintf φαίνεται ότι δέχεται μόνο μονά εισαγωγικά ' για να μπαίνουν μέσα strings.
Τα διπλά εισσαγωγικά επιστρέφουν error:

fprintf(["Long text", ...
    "continuing on the next line", ...
    "and so on"]);

Μήνυμα λάθους:
% Error using fprintf
% Invalid file identifier.  

- Πώς μπορώ να ορίσω δύο εξαρτημένες μεταβλητές Χ και Υ που ακολουθούν κανονική κατανομή;
Με τη συνάρτηση 
R = mvnrnd(mu, sigma, n);
x = R(:, 1);
y = R(:, 2);
όπου mu το διάνυσμα 2x1 (ή 1x2) των μέσων τιμών των δύο μεταβλητών 
mu = [muX; muY] (ή [muX muY] δηλαδή διάνυσμα γραμμή αντί στήλη).

sigma ο πίνακας συνδιασπορών 2x2 για δύο μεταβλητές. 
Αυτός περιέχει την πληροφορία για την αλληλεξάρτηση των δύο μεταβλητών:

sigma = [sigmaX^2 covariance(X, Y); covariance(X, Y) sigmaY];
και n το πλήθος των διπλών παρατηρήσεων.

- Προσθήκη τίτλου και υποτίτλου σε plot
και Προσθήκη περιγραφής οριζόντιου και κατακόρυφου άξονα
και Προσθήκη περιγραφή των γραμμών ενός διαγράμματος (λεζάντα ή legend στα αγγλικά):

x = rand(100, 1);
y = x.^2; %προσοχή, στις πράξεις με διανύσματα πρέπει να ορίσεις αν πρόκειται για εσωτερικό γινόμενο του διανύσματος με τον εαυτό του δηλαδή το τετράγωνο του μέτρου του ή αν είναι τετραγωνισμός κάθε στοιχείου του x για να προκύψει το αντίστοιχο στοιχείο του y.

plot(x, y)
hold on
xlabel('x')
plot(x, z)
title('The 2d graph of two random variables coming from a uniform distribution', 'this is a subtitle');
legend('y', 'z')

Προσοχή στη λεζάντα! Πρέπει να δηλώσεις τα διαφορετικά plots που θα εμφανιστούν στο ίδιο γράφημα με την ίδια σειρά με την οποία αναφέρεις τα plots στον κώδικα δηλαδή το 'y' αντιστοιχεί στην πρώτη αναφορά στο plot (plot(x,y)). Όμοια, το 'z' αντιστοιχεί στη δεύτερη γραφική παράσταση δηλαδή αυτή που αντιστιοιχεί στην δεύτερη αναφορά στο plot (plot(x,z)).


Άσκηση 2.4
- Πώς μπορώ να ορίσω τις τιμές περισσότερων από δύο μεταβλητές με την ίδια εντολή;
πχ να κάνω το [xmin, xmax] = [1, 2]; (εμφανίζει error έτσι) αντί να κάνω μία μία τις εντολές: xmin = 1; xmax = 2;

Γίνεται είτε μία προς μία όπως γράφεις παραπάνω είτε με την εντολή:
[xmin, xmax] = deal(1, 2);	

- Μπορείς ακόμη να χρησιμοποιήσεις την ίδια συνάρτηση deal για να δώσεις την ίδια τιμή σε πολλές μεταβλητές:
πχ 
[oneOverMeanOfX , meanOfOneOverX] = deal(zeros(length(nrange), 1)); 

δίνει την ίδια τιμή -αυτή εντός της συνάρτησης που εδώ είναι ένα διάνυσμα με μηδενικά- σε όλες τις μεταβλητές στην έξοδο (oneOverMeanOfX και  meanOfOneOverX).

- Πώς μπορώ να βρω την παλιά έκδοση της matlab που υποστηρίζει μία εντολή;
Από: https://www.mathworks.com/matlabcentral/answers/408609-how-to-find-specific-function-changes-run-code-as-old-version-of-matlab-without-redownloading-old
φαίνεται ότι δεν γίνεται αυτό.

- Πώς βάζω επεξηγηματικό κειμενάκι στο plot (έξω από το legend, δηλαδή να μην αφορά σε κάποιο από τα plot αλλά να είναι μία επιπλέον πληροφορία).
Βασικά, μπορείς να βάλεις την επιπλέον πληροφορία στν τίτλο.

- Πώς μπορώ να προσθέσω δυναμικό κείμενο στον τίτλο πχ;
πχ θέλω να εμφανίσω το 
y over x in logarithmic scale (xmin, xmax) = (-η_τιμή_του_xmin-, -η_τιμή_του_xmax-).

[xmin, xmax] = deal((-η_τιμή_του_xmin-, -η_τιμή_του_xmax-)).
% Είναι το ίδιο με το xmin = η_τιμή_του_xmin-; xmax = -η_τιμή_του_xmax-.

titleString = sprintf('y over x in logarithmic scale (xmin, xmax) = (%f, %f)', xmin, xmax)
title(titleString);

- Τα plots διαδοχικών εκτελέσεων του ίδιου κώδικα εμφανίζονται στο ίδιο παράθυρο.
Οφείλεται στο ότι δεν έγραψες hold off μετλα το τελευταίο plot που εμφάνισες μαζί με τα άλλα.
Πρέπει λοιπόν να βάζεις hold off μετά το τελευταίο plot που θέλεις να εμφανίσεις.

- Για κάποιο λόγο έχω για Ε[1/Χ], το 0.00055, 0.0011, 0.0011 ή -0.0011 για τις κατανομές (1,2), (0,1) και (-1, 1) αντίστοιχα. Δεν ξέρω αν αυτό είναι σωστό πάντως. ΦΑίνεται ότι όσο n αυξάνει, τόσο πιο μικρά νούμερα παίρνουμε δηλαδή φαίνεται ότι σε κάθε περίπτωση το E[1/X] τείνει στο μηδέν.  

Ο Κουγιουμτζής είπε ότι μπορεί να γνωρίζουμε την κατανομή που ακολουθεί η X, όμως δεν ξέρουμε την κατανομή που ακολουθεί η 1/X, δηλαδή δεν ανήκει σε κάποια γνωστή κατανομή. Η μέση τιμή της (E[1/X]) δεν φαίνεται να συγκλίνει σε κάποιο αριθμό. Ο Κουγιουμτζής είπε ότι αυτή είναι τυχαία δηλαδή δεν μπορούμε να την προβλέψουμε ακόμη και αν αυξήσουμε το πλήθος των επαναλήψεων Ν για τις οποίες βρίσκουμε τους μέσους όρους.

Άσκηση 2.5

- Πώς φτιάχνουμε αριθμούς από κανονική κατανομή δεδομένων mu, sigma;
πχ.
[mu, sigma, sz1, sz2] = deal(2, 3, 100, 1)
X = normrnd(mu, sigma, sz1, sz2)

έτσι, φτιάχνυομε ένα διάνυσμα 100x1 στοιχείων που προέρχονται από κανονική κατανομή με μέση τιμή 2 και τυπική απόκλιση 3.

- Όταν γράφουμε X~N(4, 0.01) εννοούμε ότι η Χ ακολουθεί κανονική κατανομή με μέση τιμή 4 και διακύμανση 0.01 ή με τυπική απόκλιση 0.01; 
Είναι Χ~Ν(μ, σ^2) οπότε ο παραπάνω αριθμός αναφέρεται στην διασπορά.

- τιμή της cdf x = 5 της κανονικής κατανομής με μέση τιμή 2 και τυπική απόκλιση 10:
cdfValueOnX = normdcf(x, 2, 10);

- τιμή της x για την οποία η cdf της κανονικής κατανομής με μέση τιμή 2 και τυπική απόκλιση 10 είναι:
xValueForGivenCdfValue = norminv(x, 2, 10);

- Στην συγκεκριμένη άσκηση δεν χρειάζεται η παραγωγή τυχαίων αριθμών από κανονική κατανομή. 
 Η normcdf χρησιμοποιεί τη συνεχή αθροιστική συνάρτηση κανονικής κατανομής για να υπολογίσει την αθροιστική μέχρι μία τιμή x.
Όμοια, η norminv χρησιμοποιεί τη συνεχή αντίστροφη αθροιστική συνάρτηση κανονικής κατανομής για να βρει την τιμή της τυχαίας μεταβλητής που αντιστοιχεί σε μία συγκεκριμένη τιμή της αθροιστικής. 


Άσκηση 2.6
- Είναι ανεξάρτητες οι μεταβλητές που παράγονται από τη rand;
Οι [x, y] = rand(100, 2); 
Οι 
x = rand(100, 1);
y = rand(100, 1);
Είναι ανεξάρτητες. Απλώς ακολουθούν την ίδια κατανομή. Δεν έχουμε ορίσει συνδιασπορές οπότε είναι ανεξάρτητες με όποιον από τους παραπάνω τρόπους να την ορίσεις.

Προσοχή! Το ιστόγραμμα δεν είναι η pdf. Είναι οι απόλυτες συχνότητες εμφάνισης των αντίστοιχων τιμών της τυχαίας μεταβλητής.
Για να γίνει pdf πρέπει να γράψεις αντί του histogram(x);:
histogram(x, 'Normalization', 'pdf');

Προσοχή στην κατανόηση των εννοιών και της εκφώνησης! 
Η εκφώνηση λέει οι επιμέρους μεταβλητές να ακολουθούν ομοιόμορφη κατανομή στο διάστημα [0, 1] και όχι ότι η μέση τιμή είναι 0 και η διασπορά είναι 1!
Στην ομοιόμορφη κατανομή, το διάστημα τιμών (a,b) αρκεί για να βρούμε την μέση τιμή : mu = (a+b)/2 και τη διασπορά var = ((b-a)^2)/12.

Το λάθος που έφτιαχνες ήταν ότι θεώρησες τη διασπορά των 100 τυχαίων μεταβλητών X, ότι είναι παρμένη από κανονική κατανομή Ν(0,1) δηλαδή ότι sigma^2 = 1, ενώ οι μεταβλητές X είναι από ομοιόμορφη κατανομή στο διάστημα (0,1). Αυτές οι τιμές είναι το διάστημα από το οποίο παίρνει τιμές οι 100 τυχαίες μεταβλητές Χ και όχι η μέση τιμή και η τυπική απόκλιση!!. Αυτή είναι (a+b)/2  και (b-a)/12.

Προσοχή! οι περισσότερες τιμές (το 99.73%) των τιμών στο ισότργραμμα βρίσκονται στις τιμές (mu-3*sigma, mu+3sigma) και ΌΧΙ στις (mu-3*variance, mu+3*variance)!

Προσοχή! Η title και η subtitle δε λειτουργούν όπως η fprintf. 
Είναι λάθος η γραφή:

x = 100;
title('MyTitle','Subtitle: some number: %d', x);

Σωστό:
x = 100;
subtitleStr = sprintf('Subtitle: some number: %d', x);
title('MyTitle', mysubtitle);

ή 
x = 100;
title('MyTitle');
subtitleStr = sprintf('Subtitle: some number: %d', x);
subtitle(subtitleStr);

Φαίνεται ότι το pc του Κουγιουμτζή δεν τρέχει τη συνάρτηση subtitle (ή τουλάχιστον αυτό έγινε στην παρουσίασή μου).


...Κεφάλαιο 3...
Άσκηση 3.1
- Φαίνεται ότι δεν μπορείς να χρησιμοποιήσεις Latex σε matlab αρχεία πέρα σε text δηλαδή πέρα από legends, τίτλους και ονόματα αξόνων στα διαγράμματα (πχ δεν μπορείς να κάνεις print σε Latex στην console. Μπορείς όμως να χρησιμοποιήσεις Latex live editor αρχεία (με επέκταση .mlx).

- Αυτό που λέει η 3.1.α είναι ότι όταν έχεις ένα αρκούντως μεγάλο δείγμα γνωστής κατανομής αλλά άγνωστων παραμέτρων, το θεώρημα μέγιστης πιθανοφάνειας μπορεί να σου εκτιμήσει τις τιμές των παραμέτρων της κατανομής του δείγματος συναρτήσει των παρατηρήσεων του δείγματος.

- Πριν από το άνοιγμα κάθε νέου figure, είναι καλή πρακτική να διαγράφεις παλιά figures που έμειναν από προηγούμενες εκτελέσεις άλλων προγραμμάτων.

- Δε χρειάζεται να γράφεις title(titleStr, subtitleStr, 'interpreter', 'tex'); 
επειδή ο tex είναι ο προκαθορισμένος interpreter άρα μπορείς να τον παραλείπεις δηλαδή να γράφεις απλά: title(titleStr, subtitleStr);

Ωστόσο, (από άσκηση 3.6) βρίσκω ότι παρότι είναι default o tex interpreter, δεν δέχεται όλα τα σύμβολα του latex. Έτσι, πρέπει να γράψεις:
	title(['Histogram of the sample mean ($$\bar{x}$$) for B = ',...
    num2str(B),' bootstrap samples'], 'interpreter', 'latex');

δηλαδή οι μεταβλητές σε latex να είναι εντός του text (μονά αυτάκια '') και ακόμη να σημειώνονται με δύο δολλάρια στην αρχή για να δηλώνεται στον interpreter ότι αυτό είναι latex ώστε να το εμφανίζει σωστά.
βλ. και άσκηση 3.8 για παρόμοιο πρόβλημα με τον τίτλο.

- Βολεύει να γράφεις αλφαριθμητικά που χρειάζονται και μεταβλητές και κείμενο αντί με sprintf:
	subtitleStr = sprintf("M: %d, n: %d, λ: %.2f", M, n, lamda);
μπορεί να γραφεί απλούστερα ως πίνακας αλφαριθμητικών:
	subtitleStr = ['M:', num2str(M), '  n:', num2str(n), '  \lambda:', num2str(lamda)];

- Για να προσθέσεις μία κατακόρυφη γραμμή σε ένα plot σε μία τιμή x:

xline([meanY lamda], '-', {'actual mean', '\lambda'})

Η παραπάνω προσθέτει δύο κατακόρυφες γραμμές (μία για κάθε στοιχείο του πίνακα στο πρώτο όρισμα) και τους δίνει και αλφαριθμητικά που επεξηγούν την καθεμία.


Άσκηση 3.2
Άσκηση 3.3
- Τί χρησιμοποιούμε από τα δύο; Διπλά ή μονά αυτάκια (εισαγωγικά); Δηλαδή ' ή ";
Πρέπει πάντα να χρησιμοποιείς μονά αυτάκια ('). Τα διπλά αυτάκια δίνουν error στην fprintf και ακόμη όταν έχεις έναν πίνακα αλφαριθμητικών που θέλεις να εμφανίσεις, δεν εμφανίζονται σωστά στον τίτλο και στον υπότιτλο.

- Πρέπει να χρησιμοποείς διαφορετική xline τη φορά για να βάλεις στο ίδιο γράφημα κατακόρυφες γραμμές διαφορετικής μορφοποίησης
πχ 
	xline([ci(1), ci(2)],  '-', 'Color', 'b');
	xline(mu, '-', 'Color', 'r');
αντί για να τα κάνεις σε μία εντολή xline (που δεν ξέρω αν/πώς γίνεται κιόλας).

Να σημειωθεί ότι πρέπει να βάλεις και το '-' ως όρισμα αλλιώς οι γραμμές είναι by default διακεκομμένες.

- Για τη σειρά των ορισμάτων του πώς εμφανίζεται μία γραμμή  (color, linestyle, linewidth κοκ) σε plots ψάξε ConstantLine Properties στη γραμμή αναζήτησης πάνω δεξιά στο κουτί αναζήτησης στο matlab.

- Βγαίνει λάθος το:

xline([ci(1), ci(2)], 'Color', 'b', 'Linestyle', '-', 'LineWidth', 2,...
    {'Lower limit of confidence interval', ...
    'Upper limit of confidence interval'});

Σωστό: 
xline([ci(1), ci(2)], '-', ...
    {'Lower limit of confidence interval', ...
    'Upper limit of confidence interval'}, 'Color', 'b', 'LineWidth', 2);

- Φαίνεται ότι το ποσοστό αποδοχής της μηδενικής υπόθεσης είναι για την πρώτη περίπτωση (n = 5) είναι της τάξης του 88.7% ενώ στη δεύτερη (n = 100), αυξάνεται στο 93.6%

Άσκηση 3.4

- Για τη δήλωση διανυσμάτων που δεν χωράνε σε μία σειρά:
Σωστός τρόπος (φτιάχνει ένα διάνυσμα 1x48):
x = [41 46 47 47 48 50 50 50 50 50 50 50, ...
48 50 50 50 50 50 50 50 52 52 53 55, ...
50 50 50 50 52 52 53 53 53 53 53 57, ...
52 52 53 53 53 53 53 53 54 54 55 68];

Λάθος τρόπος (φτιάχνει έναν πίνακα 4x12):
x = [41 46 47 47 48 50 50 50 50 50 50 50
48 50 50 50 50 50 50 50 52 52 53 55
50 50 50 50 52 52 53 53 53 53 53 57
52 52 53 53 53 53 53 53 54 54 55 68];


- Αν θέλεις να παραλείψεις την αποθήκευση σε μεταβλητές της εξόδου μίας συνάρτησης:
(πχ της vartest:) αντικαθιστάς τις μεταβλητές εξόδου με περισπωμένες:
[h, ~, ci, ~] = vartest(x, myVariance)

Να σημειωθεί ότι το διάστημα εμπιστοσύνης ci προκύπτει μόνο από το δείγμα x ενώ o έλεγχος υπόθεσης h γίνεται αληθής (δηλαδή h=0, δεν απορρίπτεται η μηδενική υπόθεση) αν το 95% των παρατηρήσεων ανήκαν στην X^2 με variance myVar. (σωστή ερμηνεία;)

- To 0 αντιστοιχεί στο true ενώ το 1 (και κάθε άλλη τιμή διάφορη του μηδενός) στο false.

- a: significance level (ή επίπεδο σημαντικότητας)

- (c): Τί σημαίνει το αποτέλεσμα που βρήκα ότι το 95% διάστημα εμπιστοσύνης του μέσου όρου είναι [50.37, 52.47]; όταν έχω ένα και μοναδικό δείγμα. Η απάντηση πρέπει να κρύβεται στον υπολογισμό του ci (διάστημα εμπιστοσύνης) από την ttest.
Απάντηση: Από θεωρία διαλ.2, διαφ.18, όταν έχω μόνο το δείγμα (δηλαδή δεν γνωρίζω μέση τιμή και διασπορά) μπορώ να εκτιμήσω το διάστημα εμπιστοσύνης αυτών μέσω της student κατανομής. Αυτά τα διαστήματα ενδεικτικά για τη μέση τιμή δίνονται από: 
 muCI = [lowerBound, upperBound] = [mean(sample) - (t_(n-1),1-a/2) * s/sqrt(n), mean(sample) + (t_(n-1),1-a/2) * s/sqrt(n)]

- To 0 είναι το false και 1 είναι true
     h είναι false (0) αν δεν απορρίπτεται η μηδενική υπόθεση και false (1) αν απορρίπτεται.
Δηλαδή τα ttest και vartest και chi2gof tests ελέγχουν και δίνουν απάντηση στο ερώτημα "Aπορρίπτεται η μηδενική υπόθεση;". Επιστρέφουν True (1) αν απορρίπτεται η και false (1) αν δεν απορρίπτεται.

- Κύριος ορισμός της p-τιμής που πρέπει να γνωρίζεις: p-τιμή του ελέγχου μίας υπόθεσης δεδομένου δείγματος είναι η πιθανότητα το δείγμα να έχει προέλθει από κατανομή που ικανοποιεί την υπόθεση.

πχ. αν η p-τιμή της υπόθεσης ένα δείγμα x να έχει προέλθει από κανονική κατανομή με μέση τιμή 7 είναι 0.04 σημαίνει ότι η πιθανότητα το δείγμα να έχει προέλθει από κανονική κατανομή μέσης τιμής 7 είναι 0.04 ή 4%. 

Αυτό σημαίνει ότι αν το επίπεδο σημαντικότητας a που έχουμε ορίσει για να αποδεχτούμε την μηδενική υπόθεση είναι 0.05, τότε το 4% είναι πολύ μικρό άρα απορρίπτουμε την μηδενική υπόθεση (είναι πολύ απίθανο το δείγμα να έχει προέλθει από αυτή την κατανομή με αυτή τη μέση τιμή.

Πρακτικά, έστω ότι ο έλεγχος αφορά την μέση τιμή. Τότε η p-τιμή υπολογίζεται από την 
αθροιστική συνάρτηση κατανομής της student δηλαδή της t = (x(bar) - μ)/(s/sqrt(n))

p = 2*(P(t > t(tilde)) = 2*(1-P(t < t(tilde)) = 2*(1 - αθροιστική της student μέχρι το t(tilde)) όπου student έχει n-1 βαθμούς ελευθερίας (n = αριθμός παρατηρήσεων του δείγματος).

Ο παραπάνω τύπος που ορίζει ο Κουγιουμτζής στις σημειώσεις του αναφέρεται στην εύρεση ακραίων τιμών για δύο ουρές.

p-τιμή: Έστω ότι έχουμε ένα δείγμα και μία υπόθεση σχετικά με την κατανομή του δείγματος. Έστω για παράδειγμα η υπόθεση ότι η μέση τιμή της κατανομής από την οποία ήρθε το δείγμα είναι ίση με κάποια τιμή - έστω 5. Τότε, η p-τιμή είναι η πιθανότητα να εμφανιστεί τόσο ακραία τιμή της πραγματικής μέσης τιμής όσο η δειγματική μέση τιμή. 
Η p-τιμή είναι μετρική κατά της μηδενικής υπόθεσης δηλαδή όσο μικρότερη είναι τόσο μικρότερη είναι η πιθανότητα το δείγμα να έχει προέλθει από κατανομή με αυτή τη μέση τιμή.
Η p-τιμή δίνει το ελάχιστο επίπεδο σημαντικότητας (a) για το οποίο είναι αποδεκτή η μηδενική υπόθεση.

Αν για παράδειγμα βρούμε p-τιμή = 0.056 και έχουμε θέσει κατώφλι σημαντικότητας 0.05 τότε δεν μπορούμε να απορρίψουμε την μηδενική υπόθεση.
Αν η p-τιμή είναι όμως μικρότερη από 0.05 (πχ 0.03) τότε μπορούμε να την απορρίψουμε.

Ένας άλλος τρόπος ερμηνείας της p-τιμής είναι να πούμε ότι τα δεδομένα του δείγματος είναι σημαντικά (για να υποστηρίξουν την υπόθεσή μας ή δεν είναι).

Συγκεκριμένο παράδειγμα: έστω ένα δείγμα παρατηρήσεων και υποθέτουμε ότι το δείγμα προέρχεται από κανονική κατανομή με μέση τιμή 3. 
Τότε αν βρούμε ότι η p-τιμή αυτής της υπόθεσης είναι 0.001 (ή 0.1%) τότε δεν μπορούμε να απορρίψουμε την υπόθεση ότι η κατανομή έχει μέση τιμή 3.



Άσκηση 3.5

- Για να διαβάσεις δεδομένα από ένα αρχείο dat και να τα αποθηκεύσεις σε μία μεταβλητή Α:
A = readtable('eruption.dat');

- Αντίθετα με τη C, στην MATLAB, η switch ελέγχει την ισότητα της έκφρασης και εκτελεί το σώμα μόνο αυτής από τις περιπτώσεις δηλαδή αγνοεί όλες τις υπόλοιπες. Έτσι, δεν χρειάζεται break

πχ η 
switch true
	case 0
		fprintf('0\n');

	case 1
		fprintf('1\n');

	case 2
		fprintf('2\n');
end

θα εμφανίσει 
1 % είναι η πρώτη τιμή που ικανοποιεί την ισότητα.

δηλαδή μόλις ελέγξει ότι ισχύει ότι το 1 είναι false τότε θα εκτελέσει μόνο το σώμα αυτής της περίπτωσης και δεν θα ελέγξει τις υπόλοιπες.

Στη C όμως (χωρίς break) ο παραπάνω κώδικας θα εμφανίσει:

1 % είναι όλες οι τιμές που ικανοποιούν την ισότητα
2


- Πρέπει να μετατρέψεις πρώτα τα δεδομένα από πίνακες (table) σε array (τύπο πίνακα που μπορεί να κάνει πράξεις το matlab). Για να το κάνεις αυτό:

myArray = table2array(myTable);




Test output: 
The waiting time variance has a confidence interval of
[165.7, 228.7] or equivalently standard deviation confidence 
interval of [12.9, 15.1] 

The hypothesis that the waiting time has a standard
deviation of 10.0 is rejected with 95.0% confidence


Άσκηση 3.6
- βλ. σημειώσεις στην άσκηση 3.1, για συμβουλές για όταν θέλεις να βάλεις latex στον τίτλο.

- Για επαναληψιμότητα τυχαίων παρατηρήρσεων:
seed = 10; % κάποια τιμή που θέλεις, δεν έχει σημασία ή rng('defeult');
% ειναι το ίδιο με το rng(0);
rng(seed);

Αν θέλεις κάθε φορά να παράγονται νέοι τυχαίοι αριθμοί μπορείς απλώς να παραλείψεις τη χρήση της παραπάνω εντολής.

Να σημειωθεί ότι η εντολή αυτή πρέπει να γραφτεί στο πρόγραμμα πρι από κάθε εντολή που παράγει αριθμούς με ψευδοτυχαίο τρόπο.	

- Υπολογισμός πολλαπλών στατιστικών από τα δείγματα bootstrap.
stats: a matrix of dims: B x (the number of statistic metrics to be 
% calculated). In this case, there are two vectors: 
% stats(:,1) with the mean of the bootstrap samples
% and stats(:,2) with the standard deviation
stats =  bootstrp(B, @(tempVar)[mean(tempVar), std(tempVar)], x);
bootMeans = stats(:, 1);
bootStds = stats(:, 2);

- Αν σου δίνεται ένας πίνακας με δείκτες σε στοιχεία και θέλεις τα δεδομένα τους μπορείς να κάνεις το εξής:


rng(0);
x = [1, 3, 4, 25, 8];
indices = randi(5, 4, 1);    % (για το συγκεκριμένο random seed) έχει στοιχεία [3, 4, 2, 3]
matFromIndices = x(indices); % έχει τα στοιχεία [x(4), x(3), x(2), x(3)] δηλαδή τα [4, 25, 3, 4]

έτσι μπορείς να βρεις τα δείγματα από τα indexes ως εξής:

(δες κώδικα), ξαναδες κώδικα αν έχεις κάνει τίποτα λα΄θος, αν απαντάς στα ερωτήματα που σου ζητούνται.

Παρατήρηση: όταν έχεις δεδομένα με μεγάλη αρνητική λοξότητα (προς τα δεξιά δηλαδή) στη μέση τιμή η εκθετική τα φέρνει σε κατανομή που μοιάζει κανονική. 
Μεγάλη θετική λοξότητα στο x(bar) δίνει y(bar) με ακόμη μεγαλύτερη θετική λοξότητα.
Γενικά αυξάνεται η λοξότητα με αυτόν τον μετασχηματισμό (τείνει προς τα αριστερά).

Άσκηση 3.7
- Ακέραιο μέρος αριθμού: 
fix(x) κάνει στρογγυλοποίηση στον πλησιέστερο ακέραιο προς το μηδέν. Έτσι, για θετικούς λειτουργεί σαν floor(x) ενώ για τους αρνητικούς λειτουργεί ως ceil(x).

- Για να εμφανίσεις δύο ιστογράμματα και αντίστοιχες λεζάντες στο ίδιο figure:
figure(1);
h1 = histogram(ciParametricLow);
title(['Low endpoints of the confidence intervals ',...
    'of the mean from the initial sample x']);
hold on;
h2 = histogram(ciParametricHigh);
legend([h1, h2], {'Parametric', 'Bootstrap'});


- Τίτλος με δύο γραμμές (χωρίς να χρησιμοποιείς υπότιτλο)
1ο παράδειγμα
title({'High endpoints of the confidence intervals ';...
    'of the mean from the initial sample x'});

2ο παράδειγμα (από άσκηση 3.10)
title({['Histogram of the p-values of M = ', num2str(M), 'samples '];...
    'for the hypothesis that mean = 0'});

το 
title({'Histogram of the p-values of M = ', num2str(M), 'samples ';...
    'for the hypothesis that mean = 0'});

δίνει error ότι οι πίνακες που προσπαθείς να κάνεις concatenate δεν έχουν την ίδια διάσταση.
Πρέπει δηλαδή όλοι οι πίνακες που χωρίζονται με ; να είναι ο καθένας μοναδικός πίνακας αλφαριθμητικών και όχι πίνακας1, πίνακας2 κοκ).


Άσκηση 3.8
- Πώς θα βάλω και latex και δύο σειρές τίτλο (όχι υπότιτλο);

Σωστός τρόπος (τουλάχιστον για να εμφανιστεί το x^2):
title({'High endpoints of the confidence intervals ';...
    'of the standard deviation from the transformed sample (x^2)'},...
    'interpreter', 'tex');


Άσκηση 3.9
- Η bootstrp και η bootci υπολογίζουν από ένα δείγμα και όχι ένα κοινό δείγμα (pooled) δηλαδή δύο μεταβλητών τα δείγματα bootstrap και το αντίστοιχο διάστημα εμπιστοσύνης. 
Έτσι, πώς μπορούμε να βρούμε το κοινό δείγμα, να πάρουμε δείγματα bootstrap και μετά να αναθέσουμε κάποια από αυτά στο X και τα υπόλοιπα στο Y για να συγκρίνουμε μετά αν το στατιστικό που ψάχνουμε είναι το ίδιο και για τις δύο μεταβλητές;

To έκανα χειροκίνητα σχεδόν: 

% Υπολογίζω το κοινό δείγμα
initialPooledSample = [X; Y];

% Κάνω bootstrp σε αυτό και βρίσκω το 
% ο μέσος όρος mean που χρησιμοποιείται είναι τυχαίος, δε χρησιμεύει σε κάτι 
% αφού δεν αποθηκεύω τους αντίστοιχους μέσους όρους των bootstrp δειγμάτων.
[~, pooledSampleIndices] = bootstrp(B, @mean, initialPooledSample); 
pooledBootSam = initialPooledSample(pooledSampleIndices);

% Χωρίζω το bootstrp δείγματα σε x και y bootstrp δείγματα (τα δείγματα x μπορεί να περιέχουν τιμές του αρχικού διανύμσματος y και αντίστοιχα για το y).
pooledX = pooledBootSam(1:M, :);
pooledY = pooledBootSam(M+1:end, :);

% Βρίσκω τους αντίστοιχους μέσους όρους όπως λέει η θεωρία (διαλ.3, διαφ.10)
meanX = mean(pooledX, 1);
meanY = mean(pooledY, 1);

% Βρίσκω τις διαφορές τους και τις ταξινομώ για να βρω τα ποσοστιαία bootstrap
diffOfMeans = meanX - meanY;
diffOfMeansSorted = sort(diffOfMeans);

% Βρίσκω τα indexes των ποσοστιαίων bootstrap και τα ίδια (τα ποσοστιαία bootstrap) από τους τύπους της θεωρίας.
ciBootIndexes = nan([2, 1]);
ciBootIndexes(1) = round((1-alpha/2)*(B+1));
ciBootIndexes(2) = B + 1 - k;

ciBoot = [diffOfMeansSorted(ciBootIndexes(1)),...
          diffOfMeansSorted(ciBootIndexes(2))];



- Aν τα δείγματα δεν έχουν το ίδιο μέγεθος, η ttest(x, y) δεν μπορεί να ελέγξει αν η διαφορά των μέσων τιμών ακολουθεί student κατανομή με μέση τιμή 0 . Αντί αυτής χρησιμοποιείται η συνάρτηση ttest2.
Έτσι, αν το x έχει n = 10 παρατηρήσεις και το y έχει m = 12 παρατηρήσεις και θέλουμε να βρούμε το διάστημα εμπιστοσύνης για τη διαφορά των μέσων τιμών, το 
[~, ~, ci, ~] = ttest(x, y, 'Alpha', 0.05) 

Τo a (άλφα) το καλούμε επίπεδο σηματνικότητας.
Το ποσοστό (1-a)*100 % καλούμε επίπεδο εμπιστοσύνης.

- Είναι λογικό που βγαίνει ότι 100% των τιμών περιέχονται στο διάστημα εμπιστοσύνης για την εκτίμηση του bootstrap; Πρέπει όχι μάλλον τουλάζιστον για το a. Μετά τον μετασχηματισμό εκεί συμβαίνουν άλλα.


- Προσοχή! (βλ. διαλ.3, διαφ.11) Για τον έλεγχο ισότητας των μέσων τιμών με τη μέθοδο bootstrap, ελέγχουμε σε ποιά θέση βρίσκεται η διαφορά μέσων όρων του αρχικού δείγματος (x(bar) - y(bar)) στην σειρά των διαφορών των μέσων όρων των δειγμάτων bootstrap. Προσοχή! Είναι λάθος να ελέγχουμε αν περιέχεται η τιμή 0 εντός των ποσοστιαίων bootstrap. Η μεθοδολογία (θεωρία) λέει ότι πρέπει να βρούμε τη θέση της διαφοράς του αρχικού μέσου όρου στις διαφορές μέσων όρων του bootstrap.


Άσκηση 3.10
- Τίτλος που συνεχίζει στην επόμενη σειρά στον κώδικα και συνεχίζει στην επόμενη σειρά και στο διάγραμμα:

title({['Histogram of the p-values of M = ', num2str(M), 'samples '];...
    'for the hypothesis that mean = 0'});

- Έστω ότι έχουμε πολλά bootstrap δείγματα από Μ αρχικά δείγματα n παρατηρήσεων. Πώς μπορούμε να βρούμε τις p-τιμές για τον έλεγχο ότι ο μέσος όρος του κάθε δείγματος (ξεχωριστά) είναι μηδέν;
Ισοδύναμη ερώτηση είναι πώς βρίσκουμε την p-τιμή από B bootstrap δείγματα;

Κάνουμε παραμετρικό έλεγχο για κάθε bootstrap δείγμα;
Αυτό είναι λογικό αλλά δεν έχω μόνο ένα αλλά Β = 1000 bootstrap δείγματα. Τί κάνω σε αυτή την περίπτωση; Για καθένα από αυτά τα Β boorstrap δείγματα, θα έχω B διαφορετικές p-τιμές. Ποιά p-τιμή να επιλέξω; Tον μέσο όρο των p-τιμών;

Εδώ: ( https://blogs.sas.com/content/iml/2011/11/02/how-to-compute-p-values-for-a-bootstrap-distribution.html ) λέει ότι η p-τιμή θα είναι το ποσοστό των στατιστικών που προκύπτουν από τα B δείγματα και περιέχουν την τιμή του στατιστικού του αρχικού δείγματος (το ένα από τα M δείγματα του οποίου την p-τιμή θέλουμε να βρούμε).
Άρα, p-τιμή = 0.05 σημαίνει ότι 5% των B bootstrap δειγμάτων είχαν τιμή τόσο ακραία ή μεγαλύτερη από την τιμή της μηδενικής υπόθεσης (0 για το μέσο όρο στο παράδειγμα).

Άρα για την p-τιμή του μέσου όρου, βρίσκουμε το μέσο όρο καθενός από τα B bootstrap δείγματα. Η p-τιμή είναι το ποσοστό να βρεθεί τόσο ακραία τιμή όσο αυτή του αρχικού δείγματος άρα το ποσοστό να έχουμε μέσο όρο μεγαλύτερο από αυτό  

- Για να καθορίσεις τα όρια του x άξονα ενός διαγράμματος:
histogram(x);
xlim([0, 1]); % καθορισμός ορίων ιστογράμματος μεταξύ 0 και 1.


- Μπορείς να ελέγξεις ταυτόχρονα την ίδια υπόθεση για τη μέση τιμή για πολλά δείγματα με ttest.
[muX, sigmaX, n, M] = deal(0, 1, 10, 100);
x = normrnd(muX, sigmaX, n, M);
alpha = 0.05;

[hV, pValV] = ttest(x, muX, 'Alpha', alpha);

Το παραπάνω ελέγχει για κάθε διαφορετική στήλη του x (δηλαδή για καθένα από τα Μ δείγματα) τη μηδενική υπόθεση ότι η μέση τιμή ισούται με 0 με επίπεδο σημαντικότητας alpha δηλαδή χρησιμοποιεί το t-παραμετρικό βάσει του δείγματος και βλέπει αν η μέση τιμή ανήκει στο [a/2, 1/a/2] διάστημα εμπιστοσύνης. Αν όχι, απορρίπτεται η μηδενική υπόθεση και επιστρέφεται 1 στο αντίστοιχο στοιχείο του διανύσματος hV.

H pValV είναι διάνυσμα με την p-τιμή από τον έλεγχο υπόθεσης για την κάθε στήλη του πίνακα δειγμάτων.


Άσκηση 3.11
- Στη μέθοδο ελέγχου με επαναδειγματοληψία χωρίς επανάθεση (τυχαία αντιμετάθεση) ο έλεγχος υπόθεσης γίνεται όπως και στον έλεγχο υπόθεσης με bootstrap (επαναδειγματοληψία με επανάθεση) δηλαδή ελέγχεται αν η παρατήρηση του αρχικού δείγματος βρίσκεται εντός των ποσοστιαίων τιμών. Αν ναι δεν απορρίπτουμε την μηδενική υπόθεση, αν όχι την απορρίπτουμε. (βλ. και διαλ.3, διαφ.14

- Ποιά η διαφορά των τριών tests όσον αφορά στον υπολογισμό των φορών που αποδεχόμαστε/απορρίπτουμε τη μηδενική υπόθεση; Τί κάνουμε στην κάθε περίπτωση;

Αφού το alpha (επίπεδο σημαντικότητας) δε συμμετέχει στις μεθόδους bootstrap και τυχαίας αντιμετάθεσης, πώς αλλάζουν τα ποσοστά απόρριψης της μηδενικής υπόθεσης με τις μεθόδους αυτές με μεταβολή του alpha;
Απάντηση: To alpha (επίπεδο σημαντικότητας) περιέχεται και στις τρεις μεθόδους (στην μεν παραμετρική υποθέτοντας γνωστή καατανομή και υπολογίζοντας τα στατιστικά στις ουρές και στις δε δύο μεθόδους επαναδειγματοληψίας - με επανάθεση (bootstrap) και χωρίς (τυχαία αντιμετάθεση) - περιέχεται στον τρόπο υπολογισμού των ποσοστιαίων τιμών (που είναι και αυτά που στην τελική καθορίζουν αν απορρίπτουμε ή όχι την μηδενική υπόθεση).


Οι μέθοδοι ελέγχου υπόθεσης που χρησιμοποιούμε είναι τρεις:
1) Παραμετρική
Αυτή η μέθοδος υποθέτει ότι τα δεδομένα ακολουθούν κατανομή student (αφού το στατιστικό που μελετάμε είναι ο μέσος όρος).
Έτσι, κάνουμε έλεγχο υπόθεσης ισότητας των μέσων τιμών για κάθε ένα από τα Μ δείγματα των δύο μεταβλητών Χ και Υ. 

2) Bootstrap
Δημιουργούμε το αρχικό κοινό δείγμα από τα επιμέρους αρχικά δείγματα των Χ και Υ. Έστω ότι το Χ έχει n παρατηρήσεις και το Y έχει m παρατηρήσεις. Από το κοινό δείγμα, κάνουμε επαναειγματοληψία ΜΕ επανάθεση και βρίσκουμε Β νέα από κοινού δείγματα. Βρίσκουμε τα επιμέρους bootstrap δείγματα χωρίζοντας το κάθε pooled bootstrap δείγμα σε n παρατηρήσεις για το X και m για το Y. Υπολογίζουμε το στατιστικό που μας ενδιαφέρει για το αρχικό δείγμα ΚΑΙ για καθένα από τα B bootstrap δείγματα. Ταξινομούμε το στατιστικό bootstrap για τα B δείγματα με αύξουσα σειρά. Αν το στατιστικό του αρχικού δείγματος δεν περιέχεται μεταξύ των ποσοστιαίων bootstrap τότε απορρίπτουμε τη μηδενική υπόθεση σε επίπεδο σημαντικότητας που καθορίζεται από το επίπεδο σημαντικότητας που ορίσαμε a.

3) Τυχαία αντιμετάθεση
Δημιουργούμε το αρχικό κοινό δείγμα από τα επιμέρους αρχικά δείγματα των Χ και Υ. Έστω ότι το Χ έχει n παρατηρήσεις και το Y έχει m παρατηρήσεις. Από το κοινό δείγμα, κάνουμε επαναειγματοληψία ΧΩΡΙΣ επανάθεση και βρίσκουμε Β νέα από κοινού δείγματα. Βρίσκουμε τα επιμέρους δείγματα χωρίζοντας το κάθε pooled δείγμα σε n παρατηρήσεις για το X και m για το Y. Υπολογίζουμε το στατιστικό που μας ενδιαφέρει για το αρχικό δείγμα ΚΑΙ για καθένα από τα B δείγματα. Ταξινομούμε το στατιστικό για τα B δείγματα με αύξουσα σειρά. Αν το στατιστικό του αρχικού δείγματος δεν περιέχεται μεταξύ των ποσοστιαίων τιμών (τιμές του στατιστικού στα αντίστοιχα ποσοστιαία σημεία) τότε απορρίπτουμε τη μηδενική υπόθεση σε επίπεδο σημαντικότητας που καθορίζεται από το επίπεδο σημαντικότητας που ορίσαμε a.



Άσκηση 3.12
- Γιατί είναι πρόβλημα να τα βάλουμε στο ίδιο κοινό δείγμα τα αρχικά μας δείγματα; Πρέπει απαραίτητα να ακολουθούν την ίδια κατανομή για να μπουν στο κοινό δείγμα;
- Πρέπει απαραίτητα να τα κεντράρουμε ώστε να έχουν την ίδια μέση τιμή;
Έτσι, (λέει ο Κουγιουμτζής) είναι ο μόνος αποδεκτός τρόπος να βάλουμε τα δείγματα των επιμέρους μεταβλητών σε ένα κοινό δείγμα.

- Προσοχή! Όταν θέλεις να ανακατασκευάσεις τα δείγματα bootstrap από τα αρχικά δείγματα μέσω της συνάρτησης bootstrap πρέπει να το κάνεις με το δείγμα bootstrap στο οποίο έγινε η δειγματοληψία και όχι στον πίνακα που περιέχει όλα τα δείγματα.

πχ.
	[n, M, muX, sigmaX, B] = deal(10, 100, 0, 1, 1000);
	x = normrnd(0, 1, 10, 100); 


Λάθος:
% για κάθε δείγμα (καθεμία από τις στήλες του πίνακα δείγμάτων x)
for i = 1:M
% γίνεται δειγματοληψία με bootstrap από μία στήλη του αρχικού πίνακα με τα δείγματα δηλαδή μόνο από ένα δείγμα.	
	[~, indices] = bootstrp(B, [], x(:,i));
% βρίσκεται το δείγμα από όλο τον πίνακα και όχι από το δείγμα-στήλη 
  	bootSam = x(indices);   
end

Σωστό
% για κάθε δείγμα (καθεμία από τις στήλες του πίνακα δείγμάτων x) 
for i = 1:M	
	xCol = x(:,i);
	[~, indices] = bootstrp(B, [], xCol);
% βρίσκεται το δείγμα MONO από όλο το δείγμα-στήλη του πίνακα από το οποίο % έγινε η δειγματοληψία και όχι από όλο τον πίνακα που περιέχει και άλλα δείγματα % άσχετα με την τωρινή επανάληψη
	bootSam = xCol(indices);
end
   
Συνοπτικά:
xCol(indices) != x(indices)



...Κεφάλαιο 4...
Άσκηση 4.1

Προσοχή!!! ΣΟΣ SOS (το έχω δει σε αρκετά κεφάλαια αυτό)
Η αβεβαιότητα για κάθε νέα μέτρηση δίνεται κατα τα γνωστά από την δειγματική τυπική απόκλιση s.
Αντίθετα, η αβεβαιότητα του μέσου όρου δηλαδή το +- τιμών που θα έχει η μέση τιμή αν πάρουμε ένα άλλο δείγμα είναι s/sqrt(n) όπου n το πλήθος των παρατηρήσεων του δείγματος.

Αλλαγή χρώματος στις γραμμές της συνάρτησης xlines.

(b) Γιατί οι κατανομές της τυπικής απόκλισης είναι λοξές προς τα αριστερά και η εκτιμώμενη τιμή είναι στα δεξιά;

Στα b και c παύει να χρησιμοποιεί τους διαφορετικούς όρους αβεβαιότητα ορθότητας και αβεβαιότητα επανάληψης και εννοεί πλέον την αβεβαιότητα με την έννοια την αβεβαιότητα που έχουμε στην κάθε νέα μέτρηση που είναι ίση με την τυπική απόκλιση των μετρήσεων.

Επίσης γιατί η αναμενόμενη τιμή (expected value) της τυπικής απόκλισης (τόσο για το h2 όσο και για το e) είναι από τα δεξιά του κύριου όγκου των παρατηρήσεων;


Άσκηση 4.2
- Προσπάθησε να μην χρησιμοποιείς πολλές μεταβλητές για το ίδιο πράγμα.
Για παράδειγμα μπορείς να μην χρησιμοποιείς την διασπορά και την τυπική απόκλιση σε δύο διαφορετικές μεταβλητές αλλά πχ να κρατήσεις μόνο την τυπική απόκλιση και να υπολογίζεις τη διασπορά κάθε φορά που την χρειάζεσαι τετραγωνίζοντας την τυπική απόκλιση.
varA = stdA^2 (διασπορά και τυπική απόκλιση της τυχαίας μεταβλητής Α)

- Προσοχή στον τύπο υπολογισμού της διασποράς από τον νόμο διάδοσης σφαλμάτων. Οι μερικές παράγωγοι είναι και αυτές τετραγωνισμένες!


Άσκηση 4.3
- Για να γράψεις ελληνικό γράμμα με subscript (δείκτες) σε τίτλο (ρ_(V, f) χωρίς τις παρενθέσεις όμως).

title(['M = ', num2str(M),' samples of power given that V and f are ',...
    'correlated with $$\rho_{V, f}$$ =', num2str(rhoVf)], 'interpreter',...
    'latex');


Άσκηση 5.1
- Στον πίνακα συμμεταβλητότητας (ή συνδιασπορών) τα μη διαγώνια στοιχεία είναι οι συνδιασπορές και ΌΧΙ τα γινόμενα των επιμέσους τυπικών αποκλίσεων!

- Πώς μπορώ να βρω την δειγματική συνδιασπορά (covXY) (προφανώς από το δείγμα);
Η εντολή C = cov(A, B) όπου A και B είναι διανύσματα ίσων διαστάσεων επιστρέφει τον πίνακα διασπορών-συναδιασπορών μεταξύ των μεταβλητών Α, Β.

- Από κάθε δείγμα δεν βγαίνει ένας συντελεστής συσχέτισης r; Άρα δεν θα έχουμε Μ παρατηρήσεις του δειγματικού συντελεστή συσχέτισης r;
Ναι, τόσες θα έχουμε αλλά θα έχουμε και ένα διάστημα εμπιστοσύνης [ciLow, ciHigh] για τον συντελεστή συσχέτισης για καθένα από αυτά τα Μ δείγματα.

- Πώς μπορώ να βρω την κρίσιμη τιμή z_(1-a/2) για το διάστημα εμπιστοσύνης του ρ;
z_(1-a/2) = norminv(p, mu, sigma)

- Από ό,τι κατάλαβα, ο υπολογισμός των κρίσιμων τιμών (τιμές που αντιστοιχούν στην πιθανότητα p για την ΤΥΠΙΚΗ ΚΑΝΟΝΙΚΗ κατανομή από τη μία και την κατανομή student με n βαθμούς ελευθερίας από την άλλη γράφεται αντίστοιχα με τις εντολές 
norminv(p, n) και tinv(p, n). Να σημειωθεί ότι η τυπική κανονική κατανομή δεν χρειάζεται βαθμούς ελευθερίας - είναι standard και δίνεται από κλειστό τύπο. Η κατανομή student ωστόσο απαοτεί το πλήθος των παρατηρήσεων του δείγματος για να υπολογίσει διαστήματα εμπιστοσύνης.

!!!SOS!!! 
- Προσοχή! Σε κάθε στατιστικό έλεγχο βασισμένο σε κάποιο δείγμα υπάρχει πάντα 1) κάποια μέση τιμή του στατιστικού δηλαδή η εκτιμώμενη τιμή για το στατιστικό αυτό με βάση το δείγμα (το στατιστικό μπορεί να είναι πχ. η μέση τιμή, η τυπική απόκλιση, η διασπορά, η λοξότητα, ο συντελεστής συσχέτισης ενός δείγματος ζευγαρωτών παρατηρήσεων (X, Y), ή οποιαδήποτε συνάρτηση αυτών των στατιστικών υπολογισμένη στο δείγμα), ΚΑΙ 2) κάποιο διάστημα εμπιστοσύνης (δύο τιμές low και high) για την εκτιμώμενη αυτή τιμή. 

- Για την τυπική κανονική κατανομή (μέσος όρος 0 και τυπική απόκλιση 1), η τιμή που αντιστοιχεί στην 95% αθροιστική συνάρτηση πυκνότητας πιθανότητας είναι η 1.96.

- Οι xlines μετράνε σαν επιπλέον plots στο ήδη υπάρχον figure. Έτσι, αν θέλω να δείξω δύο ιστογράμματα στο ίδιο plοt και επιπλέον δύο xlines με τις μέσες τιμές των δύο ιστογραμμάτων, πρέπει να δείξω τέσσερα plots στο ίδιο figure.
Το πρόβλημα με αυτό είναι ότι θέλω στη λεζάντα να φαίνονται μόνο τα χρώματα των plots και να παραλειφθεί η αναφορά των xlines.
Πώς θα το κάνω αυτό;
legend('first histogram', '', 'second histogram', '');


Αλλαγή γραμματοσειράς (μεγέθους γραμμάτων) καθορίζεις το FontSize:
xline(mean(sRhoLow), '-', {'$$\bar{r}_{low}$$'}, ...
    'FontSize', 12,...
    'LineWidth', 2, 'color', 'r', ...  
    'LabelOrientation', 'horizontal', 'interpreter', 'latex');

- Η λεζάντα μπορεί να μετακινηθεί με σύρσιμο στο plot (όπως μπορούν να γίνουν rotate τα 3d plots).

- Έχουμε το t (studentised sample correlation coefficient) για M δείγματα. Πώς μπορούμε τώρα να κάνουμε έλεγχο με βάση αυτό το μετασχηματισμένο στατιστικό;
Αφού το t ακολουθεί κατανομή student, αυτό σημαίνει ότι μπορούμε να βρούμε την πιθανότητα που αντιστοιχεί σε κάποια τιμή του στατιστικού.

- Πώς απαντάμε στην ερώτηση σε τί ποσοστό μπορεί να απορριφθεί η πραγματική τιμή του ρ δεδομένου ότι έχουμε την μετασχηματιστμένη σε student κατανομή του στατιστικού;


Άσκηση 5.2
- Η συνάρτηση corrcoeff(A, B) υπολογίζει αυτόματα τον συντελεστή συσχέτισης μεταξύ των διανυσμάτων (Α και Β).

- Προσοχή! Ο έλεγχος τυχαιοποίησης βασίζεται στο ότι το στατιστικό που μετράμε είναι τουλάχιστον μετασχηματισμένο έτσι ώστε να ακολουθεί κανονική ή έστω student κατανομή. Αλλιώς δεν έχει νόημα το 95% διάστημα εμπιστοσύνης.


Άσκηση 5.3
- Στον έλεγχο τυχαιοποίησης κάνουμε τυχαία αντιμετάθεση των τιμών του αρχικού δείγματος.

- Για να αλλάξεις έναν πίνακα (table δηλαδή με ονομασμένες στήλες - πχ. Jan, Feb, etc, μπορείς να κάνεις το εξής:

tempData = readtable('tempThes59_97.dat'); % για να φορτώσεις δεδομένα
tempData = table2array(tempData); % για να κάνεις τη μετατροπή table -> array

- Πώς μπορείς να κάνεις παραμετρικό έλεγχο όταν έχεις στατιστικό από μόνο ένα δείγμα (έχουμε μόνο ένα συντελεστή συσχέτισης βροχής - θερμοκρασίας ανα μήνα ενώ θα έπρέπε να έχουμε αρκετούς);  


- Για να φτιάξεις μία αντιστοίχιση από κλειδιά σε τιμές κάνεις το εξής:

Πρώτο παράδειγμα: αριθμοί σε αλφαριθμητικά
ids = [437 1089 2362];
names = {'Lee, N.','Jones, R.','Sanchez, C.'};
M = containers.Map(ids,names)

Δεύτερο παράδειγμα: αλφαριθμητικά σε αριθμούς
keySet = {'Jan','Feb','Mar','Apr'};
valueSet = [327.2 368.2 197.6 178.4];
M = containers.Map(keySet,valueSet)

Προσοχή! Στο latex, το % μπαίνει με συγκεκριμένο σύμβολο (\%)
Παράδειγμα: 
Λάθος: {'$\frac{a}{2}$%','(1-$\frac{a}{2}$)%'}  % το εμφανίζει με $ δηλαδή όπως %γράφεται εδώ και όχι ως latex 
Σωστό: {'$\frac{a}{2}\%$','(1-$\frac{a}{2}\%$'} % το εμφανίζει σωστά όπως πρέπει).


- Όσο αυξάνει το alpha μειώνεται η σημαντικότητα του ελέγχου δηλαδή πόσο μπορούμε να είμαστε σίγουροι ότι αν έχουμε παρα πολλά ίδια πειράματα θα έχουμε τις τιμές μέσα στο διάστημα εμπιστοσύνης.

- Πώς κάνουμε πολλά πράγματα disp;
Μπορείς αντί για πολλαπλά disp να κάνεις γράψεις πολλά διαδοχικά disps το ένα κάτω από το άλλο.


- Προσοχή στις πράξεις με πίνακες, αυτές να είναι element wise.

- Πώς μπορεί να γίνει παραμετρικό τεστ για τον συντελεστή συσχέτισης όταν έχουμε μόνο ένα δείγμα (ένα για κάθε μήνα που θέλουμε να κάνουμε το παραμετρικό τεστ); Δεν χρειαζόμαστε πολλά στατιστικά του r δηλαδή πολλά δείγματα για να υπολογίσουμε την κατανομή και άρα το διάστημα εμπιστοσύνης;
Όχι, προσοχή! Στον παραματερικό έλεγχο υποθέτουμε γνωστή κατανομή για το στατιστικό που μελετάμε. Αυτό σημαίνει ότι αρκεί ένα δείγμα για να κάνουμε τον έλεγχο. Ο έλεγχος γίνεται ως εξής: Από τη θεωρία το μετασχηματισμένο με τον μετασχηματισμό της σχέσης 5.5 (βλ. σημειώσεις) στατιστικό t του συντελεστή συσχέτισης r ακολουθεί student κατανομή με n-2 βαθμούς ελευθερίας όπου n είναι το πλήθος των διμεταβλητών παρατηρήσεων των οποίων εξετάζουμε τη συσχέτιση. Αν το μετασχηματισμένο στατιστικό t από το αρχικό δείγμα πέφτει εκτός του διαστήματος εμπιστοσύνης που έχουμε επιλέξει για τον έλεγχο (πχ για επίεπδο σημαντικότητας alpha = 0.05, διάστημα εμπιστοσύνης (1-alpha) = 95%), τότε μπορούμε να απορρίψουμε τη μηδενική υπόθεση στο αντίστοιχο επίπεδο σημαντικότητας Με άλλα λόγια, μπορούμε να πούμε ότι το δείγμα αυτών των παρατηρήσεων, στο 95% των περιπτώσεων δηλαδή αν κάνουμε το ίδιο πείραμα 100 φορές (πάρουμε 100 δείγματα μεγέθους n ασυσχέτιστων διμεταβλητών παρατηρήσεων), οι τιμές του στατιστικού τους t θα πρέπει να είναι αντός του διαστήματος εμπιστοσύνης τις 95 φορές). Έτσι, έχουμε αυτοπεποίθηση ότι δεν μπορούμε να απορρίψουμε την υπόθεση ότι οι μεταβλητές του δείγματος συσχετίζονται.


how is the parametric test performed when we only have one r for 
% every month? We need many instances of the statistic r meaning more
% samples.


- Άσκηση 5.3: Ενδεικτική άσκηση για τον τρόπο υπολογισμού p-τιμής και το αποδεχόμαστε ή απορρίπτουμε την μηδενική υπόθεση:

fprintf('p-value: %.4f\n', ...
        2*min([tcdf(corrCoefPerMonthTransformed(monthKey), dof),...
        1- tcdf(corrCoefPerMonthTransformed(monthKey), dof)]))


- Άσκηση 5.4
Εναλλατική του readtable('data.dat') η οποία επιστρέφει έναν πίνακα (table) που πρέπει στη συνέχεια να μετασχηματιστεί σε array με table2array, είναι η:
arr = importdata('data.dat');

- Προσοχή! Η εντολή cov επιστρέφει τον πίνακα διασπορών συνδιασπορών και όχι μόνο τη συνδιασπορά μεταξύ των διανυσμάτων εισόδων:

cov(A, B) % = [var(A), actualCovariance, actualCovariance, var(B)];


- Προσοχή! Το διάστημα εμπιστοσύνης είναι διαφορετικό για κάθε διαφορετική τιμή της ανεξάρτητης μεταβλητής.

- Για να λειτουργήσει σωστά το legend πρέπει να έχεις κάνει hold on μετά το πρώτο γράφημα για να λάβει υπόψη και τα επόμενα γραφήματα.


Εργασία 2022-2023

- Για να εμφανίσεις error: error(msg)


- (Aν χαλάσεις το layout του matlab): Για επιστροφή στο default layout του matlab :
Home -> Environment -> Layout -> Default 

- Τo tab έιτουργεί ως autocomplete στο matlab. 

(γ)
Υπάρχει συγκεκριμένος μετασχηματισμός που δίνει από τον συντελεστή συσχέτισης την κατανομή student στην οποία αντιστοιχεί την κατανομή student.

(για τον μη παραμετρικό έλεγχο μηδενικής συσχέτισης: είναι σαν την άσκηση 5.2)